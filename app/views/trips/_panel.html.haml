- cache ['trip-panel', trip] do
  .trip-panel.panel
    .panel-body
      %h3= trip.decorate.panel_date_range
      %h4= trip.decorate.panel_destinations
      = trip.decorate.panel_comments

      .row
        .col-xs-4
          %h5
            Type:
            = trip.time_period.capitalize
        .col-xs-4
          %h5
            Certainty:
            = trip.certainty.capitalize
        .col-xs-4
          %h5
            Purpose:
            = trip.purpose.capitalize

    .panel-footer
      .btn-group
        = button_tag(fa_icon('cog'), data: {toggle: 'dropdown'}, aria: {expanded: false}, class: 'btn btn-default btn-xs dropdown-toggle pull-right')
        %ul.dropdown-menu{:role => "menu"}
          %li= link_to(raw("#{fa_icon("edit")} Edit Trip"), edit_trip_path(trip))
          %li= link_to(raw("#{fa_icon("times-circle")} Delete Trip"), trip_path(trip), method: :delete, data: {confirm: "Please confirm. This action cannot be undone."})

      - if trip.private?
        %span.footer-indicator
          = fa_icon('lock')
          Private Trip

      - if trip.busy?
        %span.footer-indicator
          = fa_icon('exclamation-circle')
          Marked as busy

      = facebook_feed_button("Share Trip", user_url(current_user), trip_facebook_feed_caption(trip))